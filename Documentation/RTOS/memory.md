# memory

## 背景

EVL应用通常需要动态管理内存，在这种情况下他们管理资源的多少和时间是不能被提前定义的。所以libevl实现了一个内存管理的系统，让实时内核可以动态的管理内存，并且是在满足时间边界的情况下。

一个EVL内存堆（EVL heap）是由至少一个内存范围（memory extent）组成的，内存范围是一块连续的内存区域，可以达到分配内存块或者回收内存块的目的。内存堆的第一个内存范围会被evl_init_heap()初始化，然后可以使用evl_extend_heap()来拓展这个内存堆，添加更多的内存范围。关于可以添加多少个内存范围是没有严格的限制的，然而，因为这些内存范围是用链表的方法连接在一起，在使用时会被依次扫描，所以最好限制连接的长度到一个合理的水平，最好是小于10次。当然，一个程序可以获取多少内存堆也是没有限制的。

可以创建多少和多大的内存堆只取决于你的内存大小。

## EVL内存堆是如何工作的

一个EVL内存堆将它拥有的内存范围组织为一系列定长的页，被分配的区域在这些页中，每一个页都有512字节的长度。